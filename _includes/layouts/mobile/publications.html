<div class="mobile-publications mobile-section" id="publications">
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
        <h2 style="margin-bottom: 0; font-size: 1rem; font-weight: normal; text-transform: lowercase;">publications</h2>
        <div style="display: flex; gap: 0.5rem;">
            {% assign sorted_pubs = site.data.pubs | sort: "year" | reverse %}
            {% for pub in sorted_pubs %}
                <div style="width: 0.75rem; height: 0.75rem; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; opacity: {% if forloop.index > 3 %}0.2{% else %}1{% endif %};">{{ pub.emoji }}</div>
            {% endfor %}
        </div>
    </div>
    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
        {% assign sorted_pubs = site.data.pubs | sort: "year" | reverse %}
        {% for pub in sorted_pubs limit:3 %}
        <div style="display: flex; flex-direction: column; background-color: #f7f7f7; border-radius: 0.5rem; border: 1px solid #e9ecef;">
            {% if pub.image %}
            <div style="border-radius: 0.5rem 0.5rem 0 0; overflow: hidden; height: 160px; border-bottom: 1px solid #e9ecef;">
                <img class="publication-image" src="{{ site.baseurl }}/assets/images/projects/{{ pub.image }}" alt="{{ pub.title }}" style="width: 100%; height: 100%; object-fit: cover; display: block; border-radius: 0.5rem 0.5rem 0 0;">
            </div>
            {% endif %}
            <div style="display: flex; flex-direction: column; padding: 1rem;">
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem;">
                    <p style="font-size: 0.75rem; color: #495057; margin: 0; display: inline-block; background-color: #e9ecef; padding: 0.125rem 0.375rem 0.025rem 0.375rem; border-radius: 0.25rem;">{{ pub.year }}</p>
                    <span style="font-size: 0.75rem; color: #495057; margin: 0; display: inline-block; background-color: #e9ecef; padding: 0.125rem 0.375rem 0.025rem 0.375rem; border-radius: 0.25rem;">{{ pub.venue_short }}</span>
                    {% if pub.institution == "smu-hai" %}
                    <span style="font-size: 0.75rem; color: #495057; margin: 0; display: inline-block; background-color: #e9ecef; padding: 0.125rem 0.375rem 0.025rem 0.375rem; border-radius: 0.25rem;">SMU HAI</span>
                    {% endif %}
                    {% if pub.institution == "nus-hci" %}
                    <span style="font-size: 0.75rem; color: white; margin: 0; display: inline-block; background-color: #dc2626; padding: 0.125rem 0.375rem 0.025rem 0.375rem; border-radius: 0.25rem;">NUS HCI</span>
                    {% endif %}
                    {% if pub.institution == "immersification" %}
                    <span style="font-size: 0.75rem; color: white; margin: 0; display: inline-block; background-color: #2563eb; padding: 0.125rem 0.375rem 0.025rem 0.375rem; border-radius: 0.25rem;">Immersification</span>
                    {% endif %}
                    {% if pub.is-collab %}
                    <span style="font-size: 0.75rem; color: white; margin: 0; display: inline-block; background-color: #ff8787; padding: 0.125rem 0.375rem 0.025rem 0.375rem; border-radius: 0.25rem;">Collaboration</span>
                    {% endif %}
                </div>
                <a href="{{ pub.url }}" style="text-decoration: none; color: inherit;">
                    <h3 style="font-size: 1rem; font-weight: 600; color: #111827; margin: 0;">{{ pub.title }}</h3>
                    <p style="font-size: 0.75rem; color: #495057; margin: 0; line-height: 1.5;">{{ pub.authors }}</p>
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    <div style="display: flex; justify-content: center; margin-top: 2rem;">
        <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})" style="background: none; border: none; color: #666; font-size: 1.25rem; cursor: pointer; padding: 1rem; display: flex; align-items: center; gap: 0.5rem; width: 100%; justify-content: center; background-color: #f1f3f5; border-radius: 1rem;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 1.5rem; height: 1.5rem;">
                <path d="M12 4L12 20M12 4L6 10M12 4L18 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>back to top</span>
        </button>
    </div>
</div>